<h2 mat-dialog-title>Create Order</h2>

<div mat-dialog-content>

  <form [formGroup]="form">

    <mat-form-field appearance="outline" class="full">
      <mat-label>Customer name</mat-label>
      <input matInput formControlName="customerName">
    </mat-form-field>

    <h3>Items</h3>

    <div formArrayName="items">

      <div class="item-row" *ngFor="let item of items.controls; let i = index" [formGroupName]="i">

        <mat-form-field appearance="outline" class="half">
          <mat-label>Product</mat-label>
          <input matInput formControlName="productId">
        </mat-form-field>

        <mat-form-field appearance="outline" class="half">
          <mat-label>Quantity</mat-label>
          <input matInput type="number" formControlName="quantity">
        </mat-form-field>

        <button mat-icon-button color="warn" (click)="removeItem(i)" *ngIf="items.length > 1">
          âœ•
        </button>

      </div>

    </div>

    <button mat-stroked-button color="primary" (click)="addItem()">+ Add item</button>

  </form>

</div>

<div mat-dialog-actions align="end">
  <button mat-button (click)="close()">Cancel</button>
  <button mat-flat-button color="primary" (click)="submit()" [disabled]="form.invalid">
    Create
  </button>
</div>

<style>
  .full { width: 100%; }
  .half { width: 48%; }
  .item-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 10px;
  }
</style>
